# Changelog

All notable changes to Kukicha will be documented in this file.
This file is auto-generated by `scripts/changelog.kuki`.

## [v0.0.11] - 2023-11-15

### Added
- Support bidirectional numeric `for` loops (e.g., `from N to 0`) with optimized Go code generation ([7b38dd5](https://github.com/duber000/kukicha/commit/7b38dd5))
- Add `TestFindLast` and `TestFindLastOr` to slice standard library to verify loop direction correctness ([7b38dd5](https://github.com/duber000/kukicha/commit/7b38dd5))

### Changed
- Modernize standard library loops and improve numeric loop optimization in the compiler ([13e09bc](https://github.com/duber000/kukicha/commit/13e09bc))
- Eliminate body duplication in generated Go code for bidirectional loops ([c7c8c39](https://github.com/duber000/kukicha/commit/c7c8c39))

### Fixed
- Resolve parser ambiguity for `empty` and `error` keywords in expressions and struct literals ([7b38dd5](https://github.com/duber000/kukicha/commit/7b38dd5))
- Fix 5 generated Go code quality issues in the code generator ([5a28b96](https://github.com/duber000/kukicha/commit/5a28b96))
- Resolve all three documented compiler limitations ([32d7938](https://github.com/duber000/kukicha/commit/32d7938))

## [v0.0.10] - 2023-11-15

### Added
- Introduce table-driven test pattern for stdlib packages, improving test maintainability ([e6af682](https://github.com/duber000/kukicha/commit/e6af682))
- Add comprehensive test coverage for all stdlib packages (`input`, `llm`, `must`, `template`, `net`, `retry`, `concurrent`, `errors`, `maps`, `mcp`, `slice`, `string`, `json`, `math`) ([8247430](https://github.com/duber000/kukicha/commit/8247430), [b1f8e23](https://github.com/duber000/kukicha/commit/b1f8e23), [7839e29](https://github.com/duber000/kukicha/commit/7839e29), [4b1769c](https://github.com/duber000/kukicha/commit/4b1769c))
- Add `generate-tests` target and staleness check for `_test.kuki` files to enforce test consistency ([cba73ac](https://github.com/duber000/kukicha/commit/cba73ac))

### Changed
- Migrate all Go helper files to pure Kukicha, eliminating language limitation blockers ([d7689af](https://github.com/duber000/kukicha/commit/d7689af))
- Replace Go stdlib imports with Kukicha stdlib equivalents across the codebase ([a0d0965](https://github.com/duber000/kukicha/commit/a0d0965))
- Update `http.Handler` types to use proper interface types instead of `any` workarounds ([57015b9](https://github.com/duber000/kukicha/commit/57015b9))

### Fixed
- Resolve all remaining stdlib test failures, ensuring full test suite passes ([6f331ed](https://github.com/duber000/kukicha/commit/6f331ed), [3cdc43b](https://github.com/duber000/kukicha/commit/3cdc43b))
- Fix variadic slice spreading and add semantic analysis for `FunctionLiteral` ([cfde652](https://github.com/duber000/kukicha/commit/cfde652))
- Fix blank identifier redeclaration and multi-line string parsing errors ([778dbd8](https://github.com/duber000/kukicha/commit/778dbd8))
- Fix `pkgAliases` in block lambdas to resolve scope issues ([e6af682](https://github.com/duber000/kukicha/commit/e6af682))
- Append `.exe` to Windows binaries in build workflows ([16df689](https://github.com/duber000/kukicha/commit/16df689))
- Enforce `KUKICHA_DOCS_REVIEWED=1` requirement for code commits ([17c8133](https://github.com/duber000/kukicha/commit/17c8133))

## [v0.0.9] - 2023-11-15

### Added
- `kukicha init` now automatically runs `go mod init` ([5612f72](https://github.com/duber000/kukicha/commit/5612f72))
- Implemented `onerr` return shorthand and `onerr as e` alias (RFC proposals A+B) ([5e7d08f](https://github.com/duber000/kukicha/commit/5e7d08f))
- Added lint warnings for risky `onerr` handlers (RFC proposal C) ([7537c41](https://github.com/duber000/kukicha/commit/7537c41))
- Added pre-commit doc review hook ([e1bdddf](https://github.com/duber000/kukicha/commit/e1bdddf))
- Added `zed-test` target ([1e52e9d](https://github.com/duber000/kukicha/commit/1e52e9d))
- Added editor support section to README ([96e0eb0](https://github.com/duber000/kukicha/commit/96e0eb0))
- Include commit links in LLM changelog prompt ([aec2713](https://github.com/duber000/kukicha/commit/aec2713))

### Changed
- Refactored monolithic compiler files into focused modules ([d0f665a](https://github.com/duber000/kukicha/commit/d0f665a), [b33a341](https://github.com/duber000/kukicha/commit/b33a341), [060a5e3](https://github.com/duber000/kukicha/commit/060a5e3), [9770f8b](https://github.com/duber000/kukicha/commit/9770f8b))
- Extracted `parseTypeAnnotation` into dedicated module ([35bdf25](https://github.com/duber000/kukicha/commit/35bdf25))
- Unified LSP builtin/keyword metadata into shared registries ([71cf7e2](https://github.com/duber000/kukicha/commit/71cf7e2))
- Made `slice.Filter` and `slice.Map` generic ([5318811](https://github.com/duber000/kukicha/commit/5318811))
- Improved CLI tooling hardening (flags, temp files, stdlib checks, YAML output) ([e0f888b](https://github.com/duber000/kukicha/commit/e0f888b))
- Updated documentation for `onerr` syntax and usage ([4de6518](https://github.com/duber000/kukicha/commit/4de6518), [5e7d08f](https://github.com/duber000/kukicha/commit/5e7d08f), [3d6c46f](https://github.com/duber000/kukicha/commit/3d6c46f))


### Fixed
- Resolved lambda parameters in scope and infer pipe return types ([a1be5a0](https://github.com/duber000/kukicha/commit/a1be5a0))
- Fixed `fmt` import detection for interpolated strings ([15ae1f6](https://github.com/duber000/kukicha/commit/15ae1f6))
- Fixed `onerr` discard emitting valid Go for method calls ([8f5e035](https://github.com/duber000/kukicha/commit/8f5e035))
- Fixed `BlockExpr` handling in `exprHasNonPrintfInterpolation` ([989f270](https://github.com/duber000/kukicha/commit/989f270))
- Fixed CLI usage and error messages to write to stderr ([6e98e34](https://github.com/duber000/kukicha/commit/6e98e34))
- Fixed script args passing in `kukicha run` ([e3e4f71](https://github.com/duber000/kukicha/commit/e3e4f71))
- Fixed `[]byte`/`string` type errors in changelog script ([61a33db](https://github.com/duber000/kukicha/commit/61a33db))

## [v0.0.8] - 2024-10-22

### Added
- **LLM-powered changelog generator** – Automated changelog generation using `mistral-large-latest"`.
- **`shell.Run`** – Safe execution for fixed command strings with documented usage.
- **SQL injection detection** – Static analysis for string interpolation in PostgreSQL queries.
- **Security guidance** – Added to `docs/SKILL.md` and tutorials, including unsafe example fixes.

### Changed
- **Tutorial improvements** – Revised flow.
- **Editor support** – Fixed `select` syntax highlighting.

### Fixed
- **Type safety** – Resolved `[]byte`/`string` conversion errors in `changelog.kuki`.
- **HTTP auto-import** – Removed spurious `net/http` imports in fetch pipe chains.
- **Changelog workflow** – Corrected tag range handling and API key usage.

### Security
- **Addressed high-priority issues** – Mitigated XSS, SSRF, path traversal, and template injection risks.
- **HTTP hardening** – Added body limits, header validation, and shell command restrictions.
- **False positive fixes** – Resolved `http.kuki` security scanner false alarms.

