// Generated by Kukicha v1.0.0 (requires Go 1.25+)
//
// Performance options:
//   GOEXPERIMENT=greenteagc  - Green Tea GC (10-40% faster, default in Go 1.26)
//   GOEXPERIMENT=jsonv2      - Faster JSON parsing (2-10x improvement)

package cli_test

import (
	"github.com/duber000/kukicha/stdlib/cli"
	"testing"
)

func makeArgs(values map[string]string) cli.Args {
	return cli.NewArgs(values)
}

func TestGetString(t *testing.T) {
	values := make(map[string]string)
	values["format"] = "json"
	values["output"] = "result.txt"
	values["input"] = "main.kuki"
	args := makeArgs(values)
	format := cli.GetString(args, "format")
	if format != "json" {
		t.Error("Expected format to be 'json'")
	}
	output := cli.GetString(args, "output")
	if output != "result.txt" {
		t.Error("Expected output to be 'result.txt'")
	}
	missing := cli.GetString(args, "missing")
	if missing != "" {
		t.Error("Expected missing value to return empty string")
	}
}

func TestGetBool(t *testing.T) {
	values := make(map[string]string)
	values["verbose"] = "true"
	values["quiet"] = "false"
	values["debug"] = "yes"
	values["enabled"] = "1"
	args := makeArgs(values)
	verbose := cli.GetBool(args, "verbose")
	if !verbose {
		t.Error("Expected verbose to be true")
	}
	quiet := cli.GetBool(args, "quiet")
	if quiet {
		t.Error("Expected quiet to be false")
	}
	debug := cli.GetBool(args, "debug")
	if !debug {
		t.Error("Expected debug to be true")
	}
	enabled := cli.GetBool(args, "enabled")
	if !enabled {
		t.Error("Expected enabled to be true")
	}
	missing := cli.GetBool(args, "missing")
	if missing {
		t.Error("Expected missing flag to return false")
	}
}

func TestGetInt(t *testing.T) {
	values := make(map[string]string)
	values["count"] = "42"
	values["port"] = "8080"
	values["invalid"] = "not-a-number"
	args := makeArgs(values)
	count, countErr := cli.GetInt(args, "count")
	if countErr != nil {
		t.Error("Expected no error for count")
	}
	if count != 42 {
		t.Error("Expected count to be 42")
	}
	port, portErr := cli.GetInt(args, "port")
	if portErr != nil {
		t.Error("Expected no error for port")
	}
	if port != 8080 {
		t.Error("Expected port to be 8080")
	}
	invalid, invalidErr := cli.GetInt(args, "invalid")
	if invalidErr == nil {
		t.Error("Expected error for invalid int")
	}
	if invalid != 0 {
		t.Error("Expected invalid int to return 0")
	}
	missing, missingErr := cli.GetInt(args, "missing")
	if missingErr == nil {
		t.Error("Expected error for missing value")
	}
	if missing != 0 {
		t.Error("Expected missing value to return 0")
	}
}
