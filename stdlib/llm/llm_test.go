// Generated by Kukicha v0.0.9 (requires Go 1.26+)

package llm_test

import (
	"github.com/duber000/kukicha/stdlib/llm"
	"testing"
)

//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:9
func TestGetContent(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:11
	toolFunc := llm.ToolCallFunction{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:12
	toolFunc.Name = "do_thing"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:13
	toolFunc.Arguments = "{}"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:15
	toolCall := llm.ToolCall{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:16
	toolCall.ID = "call-1"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:17
	toolCall.Type = "function"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:18
	toolCall.Function = toolFunc
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:21
	msg := llm.ResponseMessage{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:22
	msg.Role = "assistant"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:23
	msg.Content = "response text"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:24
	msg.ToolCalls = []llm.ToolCall{toolCall}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:27
	choice := llm.Choice{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:28
	choice.Message = msg
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:31
	completion := llm.Completion{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:32
	completion.Choices = []llm.Choice{choice}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:35
	if llm.GetContent(completion) != "response text" {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:36
		t.Errorf("GetContent should return the assistant response")
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:39
func TestGetToolCalls(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:41
	toolFunc := llm.ToolCallFunction{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:42
	toolFunc.Name = "do_thing"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:43
	toolFunc.Arguments = "{}"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:45
	toolCall := llm.ToolCall{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:46
	toolCall.ID = "call-1"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:47
	toolCall.Type = "function"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:48
	toolCall.Function = toolFunc
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:51
	msg := llm.ResponseMessage{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:52
	msg.Role = "assistant"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:53
	msg.ToolCalls = []llm.ToolCall{toolCall}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:56
	choice := llm.Choice{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:57
	choice.Message = msg
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:58
	completion := llm.Completion{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:59
	completion.Choices = []llm.Choice{choice}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:61
	calls := llm.GetToolCalls(completion)
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:62
	if len(calls) != 1 {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:63
		t.Fatalf("Expected one tool call, got %v", len(calls))
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:64
	if calls[0].Function.Name != "do_thing" {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:65
		t.Errorf("Tool call name mismatch")
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:68
func TestHasToolCalls(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:70
	emptyComp := llm.Completion{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:71
	if llm.HasToolCalls(emptyComp) {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:72
		t.Errorf("HasToolCalls should be false for empty completion")
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:75
	toolCall := llm.ToolCall{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:76
	toolCall.ID = "call-1"
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:77
	msg := llm.ResponseMessage{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:78
	msg.ToolCalls = []llm.ToolCall{toolCall}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:79
	choice := llm.Choice{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:80
	choice.Message = msg
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:81
	completion := llm.Completion{}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:82
	completion.Choices = []llm.Choice{choice}
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:84
	if !llm.HasToolCalls(completion) {
//line /var/home/tluker/repos/go/kukicha/stdlib/llm/llm_test.kuki:85
		t.Errorf("HasToolCalls should return true when tool calls exist")
	}
}
