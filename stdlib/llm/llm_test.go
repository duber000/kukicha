// Generated by Kukicha v0.0.10 (requires Go 1.26+)

package llm_test

import (
	"github.com/duber000/kukicha/stdlib/llm"
	"github.com/duber000/kukicha/stdlib/test"
	"testing"
)

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:10
type GetContentCase struct {
	name    string
	content string
	want    string
}

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:15
func TestGetContent(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:19
	cases := []GetContentCase{GetContentCase{name: "basic content", content: "response text", want: "response text"}, GetContentCase{name: "empty content", content: "", want: ""}}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:20
	for _, tc := range cases {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:21
		t.Run(tc.name, func(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:22
			msg := llm.ResponseMessage{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:23
			msg.Role = "assistant"
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:24
			msg.Content = tc.content
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:26
			choice := llm.Choice{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:27
			choice.Message = msg
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:29
			completion := llm.Completion{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:30
			completion.Choices = []llm.Choice{choice}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:32
			test.AssertEqual(t, llm.GetContent(completion), tc.want)
		})
	}
}

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:36
type GetToolCallsCase struct {
	name      string
	callID    string
	funcName  string
	wantCount int
}

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:42
func TestGetToolCalls(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:45
	cases := []GetToolCallsCase{GetToolCallsCase{name: "one tool call", callID: "call-1", funcName: "do_thing", wantCount: 1}}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:46
	for _, tc := range cases {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:47
		t.Run(tc.name, func(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:48
			toolFunc := llm.ToolCallFunction{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:49
			toolFunc.Name = tc.funcName
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:50
			toolFunc.Arguments = "{}"
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:52
			toolCall := llm.ToolCall{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:53
			toolCall.ID = tc.callID
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:54
			toolCall.Type = "function"
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:55
			toolCall.Function = toolFunc
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:57
			msg := llm.ResponseMessage{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:58
			msg.Role = "assistant"
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:59
			msg.ToolCalls = []llm.ToolCall{toolCall}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:61
			choice := llm.Choice{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:62
			choice.Message = msg
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:63
			completion := llm.Completion{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:64
			completion.Choices = []llm.Choice{choice}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:66
			calls := llm.GetToolCalls(completion)
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:67
			test.AssertEqual(t, len(calls), tc.wantCount)
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:68
			if len(calls) > 0 {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:69
				test.AssertEqual(t, calls[0].Function.Name, tc.funcName)
			}
		})
	}
}

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:73
type HasToolCallsCase struct {
	name     string
	hasCalls bool
	want     bool
}

//line /home/user/kukicha/stdlib/llm/llm_test.kuki:78
func TestHasToolCalls(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:82
	cases := []HasToolCallsCase{HasToolCallsCase{name: "no calls", hasCalls: false, want: false}, HasToolCallsCase{name: "has calls", hasCalls: true, want: true}}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:83
	for _, tc := range cases {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:84
		t.Run(tc.name, func(t *testing.T) {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:85
			completion := llm.Completion{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:86
			if tc.hasCalls {
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:87
				toolCall := llm.ToolCall{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:88
				toolCall.ID = "call-1"
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:89
				msg := llm.ResponseMessage{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:90
				msg.ToolCalls = []llm.ToolCall{toolCall}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:91
				choice := llm.Choice{}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:92
				choice.Message = msg
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:93
				completion.Choices = []llm.Choice{choice}
			}
//line /home/user/kukicha/stdlib/llm/llm_test.kuki:95
			test.AssertEqual(t, llm.HasToolCalls(completion), tc.want)
		})
	}
}
