// Generated by Kukicha v0.0.9 (requires Go 1.26+)

package env

import (
	"errors"
	"fmt"
	"github.com/duber000/kukicha/stdlib/cast"
	kukistring "github.com/duber000/kukicha/stdlib/string"
	"os"
)

//line /home/user/kukicha/stdlib/env/env.kuki:15
func Get(key string) (string, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:16
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:17
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:18
		return "", errors.New(fmt.Sprintf("environment variable %v is not set", key))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:19
	return value, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:24
func GetOr(key string, defaultValue string) string {
//line /home/user/kukicha/stdlib/env/env.kuki:25
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:26
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:27
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:28
	return value
}

//line /home/user/kukicha/stdlib/env/env.kuki:33
func GetInt(key string) (int, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:34
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:35
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:36
		return 0, errors.New(fmt.Sprintf("environment variable %v is not set", key))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:37
	n, err := cast.Atoi(value)
//line /home/user/kukicha/stdlib/env/env.kuki:38
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:39
		return 0, errors.New(fmt.Sprintf("environment variable %v is not a valid integer: %v", key, value))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:40
	return n, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:45
func GetIntOr(key string, defaultValue int) (int, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:46
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:47
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:48
		return defaultValue, nil
	}
//line /home/user/kukicha/stdlib/env/env.kuki:49
	n, err := cast.Atoi(value)
//line /home/user/kukicha/stdlib/env/env.kuki:50
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:51
		return 0, errors.New(fmt.Sprintf("environment variable %v is not a valid integer: %v", key, value))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:52
	return n, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:57
func GetIntOrDefault(key string, defaultValue int) int {
//line /home/user/kukicha/stdlib/env/env.kuki:58
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:59
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:60
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:61
	n, err := cast.Atoi(value)
//line /home/user/kukicha/stdlib/env/env.kuki:62
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:63
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:64
	return n
}

//line /home/user/kukicha/stdlib/env/env.kuki:70
func GetBool(key string) (bool, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:71
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:72
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:73
		return false, errors.New(fmt.Sprintf("environment variable %v is not set", key))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:74
	return parseBool(key, value)
}

//line /home/user/kukicha/stdlib/env/env.kuki:79
func GetBoolOr(key string, defaultValue bool) (bool, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:80
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:81
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:82
		return defaultValue, nil
	}
//line /home/user/kukicha/stdlib/env/env.kuki:83
	return parseBool(key, value)
}

//line /home/user/kukicha/stdlib/env/env.kuki:88
func GetBoolOrDefault(key string, defaultValue bool) bool {
//line /home/user/kukicha/stdlib/env/env.kuki:89
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:90
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:91
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:92
	result, err := parseBool(key, value)
//line /home/user/kukicha/stdlib/env/env.kuki:93
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:94
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:95
	return result
}

//line /home/user/kukicha/stdlib/env/env.kuki:100
func GetFloat(key string) (float64, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:101
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:102
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:103
		return 0.000000, errors.New(fmt.Sprintf("environment variable %v is not set", key))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:104
	n, err := cast.ParseFloat(value, 64)
//line /home/user/kukicha/stdlib/env/env.kuki:105
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:106
		return 0.000000, errors.New(fmt.Sprintf("environment variable %v is not a valid number: %v", key, value))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:107
	return n, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:112
func GetFloatOr(key string, defaultValue float64) (float64, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:113
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:114
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:115
		return defaultValue, nil
	}
//line /home/user/kukicha/stdlib/env/env.kuki:116
	n, err := cast.ParseFloat(value, 64)
//line /home/user/kukicha/stdlib/env/env.kuki:117
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:118
		return 0.000000, errors.New(fmt.Sprintf("environment variable %v is not a valid number: %v", key, value))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:119
	return n, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:124
func GetList(key string, separator string) ([]string, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:125
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:126
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:127
		return []string{}, errors.New(fmt.Sprintf("environment variable %v is not set", key))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:128
	return splitAndTrim(value, separator), nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:133
func GetListOr(key string, separator string, defaultValue []string) []string {
//line /home/user/kukicha/stdlib/env/env.kuki:134
	value := os.Getenv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:135
	if value == "" {
//line /home/user/kukicha/stdlib/env/env.kuki:136
		return defaultValue
	}
//line /home/user/kukicha/stdlib/env/env.kuki:137
	return splitAndTrim(value, separator)
}

//line /home/user/kukicha/stdlib/env/env.kuki:141
func Set(key string, value string) error {
//line /home/user/kukicha/stdlib/env/env.kuki:142
	return os.Setenv(key, value)
}

//line /home/user/kukicha/stdlib/env/env.kuki:146
func Unset(key string) error {
//line /home/user/kukicha/stdlib/env/env.kuki:147
	return os.Unsetenv(key)
}

//line /home/user/kukicha/stdlib/env/env.kuki:151
func IsSet(key string) bool {
//line /home/user/kukicha/stdlib/env/env.kuki:152
	_, exists := os.LookupEnv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:153
	return exists
}

//line /home/user/kukicha/stdlib/env/env.kuki:157
func IsSetAndNotEmpty(key string) bool {
//line /home/user/kukicha/stdlib/env/env.kuki:158
	value, exists := os.LookupEnv(key)
//line /home/user/kukicha/stdlib/env/env.kuki:159
	if !exists {
//line /home/user/kukicha/stdlib/env/env.kuki:160
		return false
	}
//line /home/user/kukicha/stdlib/env/env.kuki:161
	return !(value == "")
}

//line /home/user/kukicha/stdlib/env/env.kuki:165
func All() map[string]string {
//line /home/user/kukicha/stdlib/env/env.kuki:166
	result := make(map[string]string)
//line /home/user/kukicha/stdlib/env/env.kuki:167
	for _, e := range os.Environ() {
//line /home/user/kukicha/stdlib/env/env.kuki:168
		parts := kukistring.SplitN(e, "=", 2)
//line /home/user/kukicha/stdlib/env/env.kuki:169
		if len(parts) == 2 {
//line /home/user/kukicha/stdlib/env/env.kuki:170
			result[parts[0]] = parts[1]
		}
	}
//line /home/user/kukicha/stdlib/env/env.kuki:171
	return result
}

//line /home/user/kukicha/stdlib/env/env.kuki:177
func ParseBool(value string) (bool, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:178
	lower := kukistring.ToLower(kukistring.TrimSpace(value))
//line /home/user/kukicha/stdlib/env/env.kuki:179
	if (((lower == "true") || (lower == "1")) || (lower == "yes")) || (lower == "on") {
//line /home/user/kukicha/stdlib/env/env.kuki:180
		return true, nil
	}
//line /home/user/kukicha/stdlib/env/env.kuki:181
	if (((lower == "false") || (lower == "0")) || (lower == "no")) || (lower == "off") {
//line /home/user/kukicha/stdlib/env/env.kuki:182
		return false, nil
	}
//line /home/user/kukicha/stdlib/env/env.kuki:183
	return false, errors.New(fmt.Sprintf("not a valid boolean: %v", value))
}

//line /home/user/kukicha/stdlib/env/env.kuki:188
func SplitAndTrim(value string, separator string) []string {
//line /home/user/kukicha/stdlib/env/env.kuki:189
	parts := kukistring.Split(value, separator)
//line /home/user/kukicha/stdlib/env/env.kuki:190
	result := make([]string, 0, len(parts))
//line /home/user/kukicha/stdlib/env/env.kuki:191
	for _, part := range parts {
//line /home/user/kukicha/stdlib/env/env.kuki:192
		trimmed := kukistring.TrimSpace(part)
//line /home/user/kukicha/stdlib/env/env.kuki:193
		if trimmed != "" {
//line /home/user/kukicha/stdlib/env/env.kuki:194
			result = append(result, trimmed)
		}
	}
//line /home/user/kukicha/stdlib/env/env.kuki:195
	return result
}

//line /home/user/kukicha/stdlib/env/env.kuki:198
func parseBool(key string, value string) (bool, error) {
//line /home/user/kukicha/stdlib/env/env.kuki:199
	result, err := ParseBool(value)
//line /home/user/kukicha/stdlib/env/env.kuki:200
	if err != nil {
//line /home/user/kukicha/stdlib/env/env.kuki:201
		return false, errors.New(fmt.Sprintf("environment variable %v is not a valid boolean: %v", key, value))
	}
//line /home/user/kukicha/stdlib/env/env.kuki:202
	return result, nil
}

//line /home/user/kukicha/stdlib/env/env.kuki:205
func splitAndTrim(value string, separator string) []string {
//line /home/user/kukicha/stdlib/env/env.kuki:206
	return SplitAndTrim(value, separator)
}
