// Generated by Kukicha v0.0.4 (requires Go 1.26+)
//
// Performance: GOEXPERIMENT=jsonv2 enables faster JSON parsing (2-10x improvement)

package result

import "errors"

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:9
type Optional struct {
	hasValue bool
	value    any
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:15
type Result struct {
	isOk  bool
	value any
	err   error
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:23
func Some(value any) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:24
	return Optional{hasValue: true, value: value}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:27
func None() Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:28
	return Optional{hasValue: false, value: nil}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:31
func IsSome(opt Optional) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:32
	return opt.hasValue
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:35
func IsNone(opt Optional) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:36
	return !opt.hasValue
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:40
func Unwrap(opt Optional) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:41
	if !opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:42
		panic("attempted to unwrap None value")
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:43
	return opt.value
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:46
func UnwrapOr(opt Optional, defaultValue any) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:47
	if opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:48
		return opt.value
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:49
	return defaultValue
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:53
func Map(opt Optional, transform func(any) any) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:54
	if !opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:55
		return opt
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:56
	return Some(transform(opt.value))
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:60
func FlatMap(opt Optional, transform func(any) Optional) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:61
	if !opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:62
		return None()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:63
	return transform(opt.value)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:67
func Filter(opt Optional, predicate func(any) bool) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:68
	if !opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:69
		return opt
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:70
	if predicate(opt.value) {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:71
		return opt
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:72
	return None()
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:77
func Ok(value any) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:78
	return Result{isOk: true, value: value, err: nil}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:81
func Err(err error) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:82
	return Result{isOk: false, value: nil, err: err}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:85
func IsOk(res Result) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:86
	return res.isOk
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:89
func IsErr(res Result) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:90
	return !res.isOk
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:94
func UnwrapResult(res Result) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:95
	if !res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:96
		panic("attempted to unwrap Err result")
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:97
	return res.value
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:100
func UnwrapErr(res Result) error {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:101
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:102
		panic("attempted to unwrap error from Ok result")
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:103
	return res.err
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:106
func UnwrapOrResult(res Result, defaultValue any) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:107
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:108
		return res.value
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:109
	return defaultValue
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:112
func UnwrapOrElse(res Result, fn func() any) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:113
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:114
		return res.value
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:115
	return fn()
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:119
func MapResult(res Result, transform func(any) any) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:120
	if !res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:121
		return res
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:122
	return Ok(transform(res.value))
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:126
func MapErr(res Result, transform func(error) error) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:127
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:128
		return res
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:129
	return Err(transform(res.err))
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:133
func AndThen(res Result, fn func(any) Result) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:134
	if !res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:135
		return res
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:136
	return fn(res.value)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:140
func OrElse(res Result, fn func(error) Result) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:141
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:142
		return res
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:143
	return fn(res.err)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:147
func Match(res Result, onOk func(any) any, onErr func(error) any) any {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:148
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:149
		return onOk(res.value)
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:150
	return onErr(res.err)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:156
func ToOptional(res Result) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:157
	if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:158
		return Some(res.value)
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:159
	return None()
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:163
func FromOptional(opt Optional, err error) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:164
	if opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:165
		return Ok(opt.value)
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:166
	return Err(err)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:171
func Flatten(opt Optional) Optional {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:172
	if !opt.hasValue {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:173
		return None()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:175
	switch inner := opt.value.(type) {
	case Optional:
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:177
		return inner
	default:
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:179
		return opt
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:182
func FlattenResult(res Result) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:183
	if !res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:184
		return res
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:186
	switch inner := res.value.(type) {
	case Result:
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:188
		return inner
	default:
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:190
		return res
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:195
func All(results []Result) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:196
	values := make([]any, 0)
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:198
	for _, res := range results {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:199
		if !res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:200
			return res
		}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:201
		values = append(values, res.value)
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:203
	return Ok(values)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:207
func Any(results []Result) Result {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:208
	lastErr := errors.New("no results provided")
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:210
	for _, res := range results {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:211
		if res.isOk {
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:212
			return res
		}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:213
		lastErr = res.err
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/result/result.kuki:215
	return Err(lastErr)
}
