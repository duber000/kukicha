// Generated by Kukicha v0.0.7 (requires Go 1.26+)

package ctx

import (
	"context"
	"time"
)

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:18
type Handle struct {
	ctx    context.Context
	cancel func()
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:23
func Background() Handle {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:24
	return Handle{ctx: context.Background(), cancel: nil}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:31
func WithTimeout(parent Handle, seconds int64) Handle {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:32
	base := parent.ctx
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:33
	if base == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:34
		base = context.Background()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:35
	timeout := (time.Duration(seconds) * time.Second)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:36
	child, cancel := context.WithTimeout(base, timeout)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:37
	return Handle{ctx: child, cancel: cancel}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:44
func WithTimeoutMs(parent Handle, timeoutMs int64) Handle {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:45
	base := parent.ctx
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:46
	if base == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:47
		base = context.Background()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:48
	timeout := (time.Duration(timeoutMs) * time.Millisecond)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:49
	child, cancel := context.WithTimeout(base, timeout)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:50
	return Handle{ctx: child, cancel: cancel}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:57
func WithDeadlineUnix(parent Handle, unixSeconds int64) Handle {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:58
	base := parent.ctx
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:59
	if base == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:60
		base = context.Background()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:61
	deadline := time.Unix(unixSeconds, 0)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:62
	child, cancel := context.WithDeadline(base, deadline)
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:63
	return Handle{ctx: child, cancel: cancel}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:70
func Cancel(handle Handle) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:71
	if handle.cancel != nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:72
		handle.cancel()
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:73
		return true
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:74
	return false
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:77
func Done(handle Handle) bool {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:78
	if handle.ctx == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:79
		return false
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:80
	return (handle.ctx.Err() != nil)
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:83
func Err(handle Handle) error {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:84
	if handle.ctx == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:85
		return nil
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:86
	return handle.ctx.Err()
}

//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:89
func Value(handle Handle) context.Context {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:90
	if handle.ctx == nil {
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:91
		return context.Background()
	}
//line /var/home/tluker/repos/go/kukicha/stdlib/ctx/ctx.kuki:92
	return handle.ctx
}
