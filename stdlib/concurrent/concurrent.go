// Generated by Kukicha v0.0.5 (requires Go 1.26+)
//
// Performance: GOEXPERIMENT=jsonv2 enables faster JSON parsing (2-10x improvement)

package concurrent

import "sync"

//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:10
func Parallel(tasks ...func()) {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:11
	wg := sync.WaitGroup{}
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:12
	wg.Add(len(tasks))
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:13
	for _, task := range tasks {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:14
		t := task
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:15
		go func() {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:16
			t()
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:17
			wg.Done()
		}()
	}
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:19
	wg.Wait()
}

//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:24
func ParallelWithLimit(limit int, tasks ...func()) {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:25
	wg := sync.WaitGroup{}
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:26
	semaphore := make(chan int, limit)
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:27
	wg.Add(len(tasks))
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:28
	for _, task := range tasks {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:29
		semaphore <- 1
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:30
		t := task
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:31
		go func() {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:32
			t()
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:33
			<-semaphore
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:34
			wg.Done()
		}()
	}
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:36
	wg.Wait()
}

//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:42
func Go(fn func()) {
//line /home/user/kukicha/stdlib/concurrent/concurrent.kuki:43
	go fn()
}
