# A2A Package Tests

petiole a2a_test

import "stdlib/a2a"
import "testing"

# Test basic types and structures
func TestBasicTypes(t reference testing.T)
    # Test that we can create and use basic types
    agent := a2a.Agent{}
    request := a2a.Request{}
    task := a2a.Task{}

    # Verify types can be instantiated without panic
    # (value types cannot be compared to empty)
    _ = agent
    _ = request
    _ = task

# Test request builder pattern
func TestRequestBuilder(t reference testing.T)
    # Create a mock agent (we can't test real discovery without network)
    agent := a2a.Agent{}

    # Test request builder chain - verify it builds without panic
    req := a2a.New(agent)
    req = a2a.Text(req, "Hello")
    req = a2a.Context(req, "context123")
    req = a2a.Retry(req, 3, 100)

    # Builders should succeed (we can't inspect private fields)

# Test Skills function with mock data
func TestSkillsFunction(t reference testing.T)
    # This is a basic test - in a real scenario we'd need to mock the agent card
    # For now, we just test that the function signature is correct
    agent := a2a.Agent{}

    # We can't test actual skills without a real agent card
    # Smoke test that the agent can be created
    _ = agent

# Test Close function
func TestCloseFunction(t reference testing.T)
    agent := a2a.Agent{}
    # We can't test actual closing without a real client
    # Smoke test that the agent can be created
    _ = agent

# Test that Task type can be instantiated
func TestTaskCreation(t reference testing.T)
    # Test taskFromA2A with empty task
    emptyTask := a2a.Task{}
    # Smoke test - verify Task type exists and can be created
    _ = emptyTask