// Generated by Kukicha v0.0.10 (requires Go 1.26+)

package sandbox_test

import (
	"github.com/duber000/kukicha/stdlib/sandbox"
	"github.com/duber000/kukicha/stdlib/test"
	"os"
	"testing"
)

//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:11
type SandboxCase struct {
	name string
}

//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:14
func TestSandboxFileOperations(t *testing.T) {
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:17
	cases := []SandboxCase{SandboxCase{name: "file operations"}}
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:18
	for _, tc := range cases {
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:19
		t.Run(tc.name, func(t *testing.T) {
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:20
			dir, err := os.MkdirTemp("", "sandbox-test")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:21
			test.AssertNoError(t, err)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:22
			defer os.RemoveAll(dir)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:24
			box, err2 := sandbox.New(dir)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:25
			test.AssertNoError(t, err2)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:26
			defer sandbox.Close(box)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:28
			writeErr := sandbox.WriteString(box, "data", "notes.txt")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:29
			test.AssertNoError(t, writeErr)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:30
			test.AssertTrue(t, sandbox.Exists(box, "notes.txt"))
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:32
			content, readErr := sandbox.ReadString(box, "notes.txt")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:33
			test.AssertNoError(t, readErr)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:34
			test.AssertEqual(t, content, "data")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:36
			test.AssertTrue(t, sandbox.IsFile(box, "notes.txt"))
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:38
			mkdirErr := sandbox.MkDir(box, "subdir")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:39
			test.AssertNoError(t, mkdirErr)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:40
			test.AssertTrue(t, sandbox.IsDir(box, "subdir"))
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:42
			names, listErr := sandbox.List(box, ".")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:43
			test.AssertNoError(t, listErr)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:44
			if len(names) == 0 {
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:45
				t.Errorf("List should return at least one entry")
			}
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:47
			delErr := sandbox.Delete(box, "notes.txt")
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:48
			test.AssertNoError(t, delErr)
//line /home/user/kukicha/stdlib/sandbox/sandbox_test.kuki:49
			test.AssertFalse(t, sandbox.Exists(box, "notes.txt"))
		})
	}
}
