# Tests for Kukicha Standard Library - Kube Package
# These tests validate the kube module's builder pattern and type construction.
# Full integration tests require a running Kubernetes cluster.

petiole kube_test

import "testing"
import "stdlib/kube"

# --- TestNewConfig ---
type NewConfigCase
    name string

func TestNewConfig(t reference testing.T)
    cases := list of NewConfigCase{
        NewConfigCase{name: "builder"},
    }
    for tc in cases
        t.Run(tc.name, (t reference testing.T) =>
            cfg := kube.New()
            cfg = cfg |> kube.Kubeconfig("/tmp/test-kubeconfig")
            cfg = cfg |> kube.Context("test-context")
            _ = cfg
        )

# --- TestInCluster ---
type InClusterCase
    name string

func TestInCluster(t reference testing.T)
    cases := list of InClusterCase{
        InClusterCase{name: "in cluster"},
    }
    for tc in cases
        t.Run(tc.name, (t reference testing.T) =>
            cfg := kube.New() |> kube.InCluster()
            _ = cfg
        )

# --- TestNamespace ---
type NamespaceCase
    name string

func TestNamespace(t reference testing.T)
    cases := list of NamespaceCase{
        NamespaceCase{name: "namespace scoping"},
    }
    for tc in cases
        t.Run(tc.name, (t reference testing.T) =>
            c := kube.Cluster{}
            scoped := kube.Namespace(c, "production")
            _ = scoped
        )
