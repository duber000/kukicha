// Generated by Kukicha v0.0.10 (requires Go 1.26+)

package files_test

import (
	"github.com/duber000/kukicha/stdlib/files"
	"github.com/duber000/kukicha/stdlib/test"
	"os"
	"path/filepath"
	"testing"
	"time"
)

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:12
type TestData struct {
	Name  string
	Value int
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:17
type ReadWriteCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:20
func TestReadWrite(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:23
	cases := []ReadWriteCase{ReadWriteCase{name: "basic"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:24
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:25
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:26
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:27
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:28
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:30
			testFile := filepath.Join(tmpDir, "test.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:31
			testContent := "Hello, Kukicha!"
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:33
			err = files.WriteString(testContent, testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:34
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:36
			content, readErr := files.Read(testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:37
			test.AssertNoError(t, readErr)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:39
			contentStr := string(content)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:40
			test.AssertEqual(t, contentStr, testContent)
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:44
type WriteJSONCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:47
func TestWriteJSON(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:50
	cases := []WriteJSONCase{WriteJSONCase{name: "write struct"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:51
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:52
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:53
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:54
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:55
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:57
			testFile := filepath.Join(tmpDir, "data.json")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:58
			testData := TestData{Name: "test", Value: 42}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:60
			err = files.Write(testData, testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:61
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:62
			test.AssertTrue(t, files.Exists(testFile))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:64
			content, readErr := files.Read(testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:65
			test.AssertNoError(t, readErr)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:66
			if len(content) == 0 {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:67
				t.Error("Expected non-empty JSON content")
			}
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:71
type ExistsCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:74
func TestExists(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:77
	cases := []ExistsCase{ExistsCase{name: "file exists"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:78
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:79
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:80
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:81
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:82
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:84
			existingFile := filepath.Join(tmpDir, "exists.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:85
			nonExistentFile := filepath.Join(tmpDir, "does-not-exist.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:87
			err = files.WriteString("test", existingFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:88
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:90
			test.AssertTrue(t, files.Exists(existingFile))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:91
			test.AssertFalse(t, files.Exists(nonExistentFile))
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:95
type IsDirCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:98
func TestIsDir(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:101
	cases := []IsDirCase{IsDirCase{name: "check directory"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:102
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:103
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:104
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:105
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:106
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:108
			testFile := filepath.Join(tmpDir, "file.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:109
			testDir := filepath.Join(tmpDir, "subdir")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:111
			err = files.WriteString("test", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:112
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:114
			err = os.Mkdir(testDir, 0755)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:115
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:117
			test.AssertTrue(t, files.IsDir(testDir))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:118
			test.AssertFalse(t, files.IsDir(testFile))
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:122
type ListCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:125
func TestList(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:128
	cases := []ListCase{ListCase{name: "list files"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:129
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:130
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:131
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:132
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:133
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:135
			files.WriteString("test1", filepath.Join(tmpDir, "file1.txt"))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:136
			files.WriteString("test2", filepath.Join(tmpDir, "file2.txt"))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:137
			os.Mkdir(filepath.Join(tmpDir, "subdir"), 0755)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:139
			entries, listErr := files.List(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:140
			test.AssertNoError(t, listErr)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:141
			test.AssertEqual(t, len(entries), 3)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:143
			for _, entry := range entries {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:144
				if entry == "" {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:145
					t.Error("Expected non-empty path")
				}
			}
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:149
type AppendCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:152
func TestAppend(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:155
	cases := []AppendCase{AppendCase{name: "append string"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:156
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:157
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:158
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:159
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:160
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:162
			testFile := filepath.Join(tmpDir, "append.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:164
			err = files.WriteString("Line 1\n", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:165
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:167
			err = files.AppendString("Line 2\n", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:168
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:170
			content, readErr := files.Read(testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:171
			test.AssertNoError(t, readErr)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:173
			expected := "Line 1\nLine 2\n"
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:174
			contentStr := string(content)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:175
			test.AssertEqual(t, contentStr, expected)
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:179
type CopyCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:182
func TestCopy(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:185
	cases := []CopyCase{CopyCase{name: "copy file"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:186
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:187
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:188
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:189
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:190
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:192
			srcFile := filepath.Join(tmpDir, "source.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:193
			dstFile := filepath.Join(tmpDir, "destination.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:194
			testContent := "Copy me!"
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:196
			err = files.WriteString(testContent, srcFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:197
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:199
			err = files.Copy(srcFile, dstFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:200
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:201
			test.AssertTrue(t, files.Exists(dstFile))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:203
			content, readErr := files.Read(dstFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:204
			test.AssertNoError(t, readErr)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:206
			contentStr := string(content)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:207
			test.AssertEqual(t, contentStr, testContent)
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:211
type DeleteCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:214
func TestDelete(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:217
	cases := []DeleteCase{DeleteCase{name: "delete file"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:218
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:219
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:220
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:221
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:222
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:224
			testFile := filepath.Join(tmpDir, "delete-me.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:226
			err = files.WriteString("test", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:227
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:228
			test.AssertTrue(t, files.Exists(testFile))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:230
			err = files.Delete(testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:231
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:232
			test.AssertFalse(t, files.Exists(testFile))
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:236
type TempFileCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:239
func TestTempFile(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:242
	cases := []TempFileCase{TempFileCase{name: "create temp file"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:243
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:244
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:245
			path, err := files.TempFile("kukicha-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:246
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:247
			defer os.Remove(path)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:249
			test.AssertTrue(t, files.Exists(path))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:251
			err = files.WriteString("temp data", path)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:252
			test.AssertNoError(t, err)
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:256
type PathCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:259
func TestPathFunctions(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:262
	cases := []PathCase{PathCase{name: "path operations"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:263
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:264
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:265
			testPath := "/home/user/document.txt"
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:267
			basename := files.Basename(testPath)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:268
			test.AssertEqual(t, basename, "document.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:270
			dirname := files.Dirname(testPath)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:271
			test.AssertEqual(t, dirname, "/home/user")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:273
			ext := files.Extension(testPath)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:274
			test.AssertEqual(t, ext, ".txt")
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:278
type UseWithCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:281
func TestUseWith(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:284
	cases := []UseWithCase{UseWithCase{name: "use with block"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:285
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:286
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:287
			tmpDir, err := os.MkdirTemp("", "kukicha-files-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:288
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:290
			testFile := filepath.Join(tmpDir, "temp.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:291
			files.WriteString("content", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:293
			existed := false
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:294
			files.UseWith(testFile, func(path string) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:295
				if files.Exists(path) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:296
					existed = true
				}
			})
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:299
			test.AssertTrue(t, existed)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:300
			test.AssertFalse(t, files.Exists(testFile))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:302
			os.RemoveAll(tmpDir)
		})
	}
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:306
type WatchCase struct {
	name string
}

//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:309
func TestWatch(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:312
	cases := []WatchCase{WatchCase{name: "watch file"}}
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:313
	for _, tc := range cases {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:314
		t.Run(tc.name, func(t *testing.T) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:315
			tmpDir, err := os.MkdirTemp("", "kukicha-watch-test-")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:316
			test.AssertNoError(t, err)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:317
			defer os.RemoveAll(tmpDir)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:319
			testFile := filepath.Join(tmpDir, "watch.txt")
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:320
			files.WriteString("initial", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:322
			ch := make(chan string)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:323
			go files.Watch(filepath.Join(tmpDir, "*.txt"), func(path string) {
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:324
				ch <- path
			})
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:327
			time.Sleep((1 * time.Second))
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:328
			files.WriteString("modified", testFile)
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:330
			receivedPath := <-ch
//line /var/home/tluker/repos/go/kukicha/stdlib/files/files_test.kuki:331
			test.AssertEqual(t, receivedPath, testFile)
		})
	}
}
