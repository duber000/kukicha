// Generated by Kukicha v1.0.0 (requires Go 1.25+)
//
// Performance options:
//   GOEXPERIMENT=greenteagc  - Green Tea GC (10-40% faster, default in Go 1.26)
//   GOEXPERIMENT=jsonv2      - Faster JSON parsing (2-10x improvement)

package main

import (
	"fmt"
	"github.com/duber000/kukicha/stdlib/fetch"
	"github.com/duber000/kukicha/stdlib/json"
	"net/http"
)

type Repo struct {
	ID          int    `json:"id"`
	Name        string `json:"name"`
	FullName    string `json:"full_name"`
	Description string `json:"description"`
	Stars       int    `json:"stargazers_count"`
	Language    string `json:"language"`
	URL         string `json:"html_url"`
}

func main() {
	repos := []Repo{}
	if err_1 := json.Decode(json.NewDecoder(func() *http.Response {
		val, _ := fetch.CheckStatus(func() *http.Response { val, _ := fetch.Get("https://api.github.com/users/golang/repos"); return val }())
		return val
	}().Body), &repos); err_1 != nil {
		panic(fmt.Sprintf("Failed to fetch or parse repos: %v", err_1))
	}
	fmt.Println(fmt.Sprintf("Successfully fetched %v repositories!", len(repos)))
	for _, repo := range repos[:5] {
		fmt.Println(fmt.Sprintf("- %v: %v stars (%v)", repo.Name, repo.Stars, repo.Language))
	}
}
