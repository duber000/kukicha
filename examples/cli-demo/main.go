// Generated by Kukicha v0.0.4 (requires Go 1.26+)
//
// Performance: GOEXPERIMENT=jsonv2 enables faster JSON parsing (2-10x improvement)

package main

import (
	"fmt"
	"github.com/duber000/kukicha/stdlib/cli"
	"github.com/duber000/kukicha/stdlib/shell"
)

//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:6
func main() {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:7
	app := cli.Action(cli.AddFlag(cli.Arg(cli.New("cli-demo"), "command", "Command to run (echo|ls|info)"), "verbose", "Enable verbose output", "false"), handleCommand)
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:9
	if err_1 := cli.RunApp(app); err_1 != nil {
		panic("command failed")
	}
}

//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:11
func handleCommand(args cli.Args) {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:12
	command := cli.GetString(args, "command")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:13
	verbose := cli.GetBool(args, "verbose")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:15
	if command == "" {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:16
		fmt.Println("Usage: kukicha run examples/cli-demo/main.kuki <command>")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:17
		fmt.Println("Commands: echo, ls, info")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:18
		fmt.Println("Flags: --verbose")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:19
		return
	}
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:21
	if verbose {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:22
		fmt.Println("Verbose mode enabled")
	}
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:25
	if command == "echo" {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:26
		fmt.Println("Hello from CLI!")
	} else if command == "ls" {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:29
		if verbose {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:30
			fmt.Println("Listing current directory")
		}
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:33
		cmd := shell.New("ls", "-la")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:34
		result := shell.Execute(cmd)
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:36
		if shell.Success(result) {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:37
			output := string(shell.GetOutput(result))
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:38
			fmt.Println(output)
		} else {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:40
			errOutput := string(shell.GetError(result))
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:41
			fmt.Println(fmt.Sprintf("Error: %v", errOutput))
		}
	} else if command == "info" {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:45
		fmt.Println("System Information:")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:48
		cmd1 := shell.New("hostname")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:49
		result1 := shell.Execute(cmd1)
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:50
		if shell.Success(result1) {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:51
			hostname := string(shell.GetOutput(result1))
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:52
			fmt.Println(fmt.Sprintf("Hostname: %v", hostname))
		} else {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:54
			fmt.Println("Hostname: unknown")
		}
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:57
		cmd2 := shell.New("pwd")
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:58
		result2 := shell.Execute(cmd2)
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:59
		if shell.Success(result2) {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:60
			pwd := string(shell.GetOutput(result2))
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:61
			fmt.Println(fmt.Sprintf("Current Directory: %v", pwd))
		} else {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:63
			fmt.Println("Current Directory: unknown")
		}
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:66
		if shell.Which("git") {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:67
			fmt.Println("Git is installed")
		} else {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:69
			fmt.Println("Git is not installed")
		}
	} else {
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:71
		fmt.Println(fmt.Sprintf("Unknown command: %v", command))
//line /var/home/tluker/repos/go/kukicha/examples/cli-demo/main.kuki:72
		fmt.Println("Available commands: echo, ls, info")
	}
}
